<html>
<head>
<script type="text/javascript" src="jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="control.js"></script>
<script type="text/javascript" src="protovis-r3.2.js"></script>
</head>
<body>
<h1>JSON METER</h1>
<form>
    <input id="buttonchart" type="button" value="Chart" />
    <input id="buttontree" type="button" value="Tree" />
</form>
<div id="chartdiv">
<script type="text/javascript+protovis">
function chart() {
    var width = 1000;
    var height = 245;
    var x = pv.Scale.linear(concatdata, function(d) d.x).range(0, width);
    var y = pv.Scale.linear(0, maxvalue*1.1).range(0, height);
    
    //console.log("concatdatalength2:"+concatdata.length);
   // console.log("date: "+concatdata[0].x);
    
    var barWidth = width/concatdata.length;
    //console.log("barWidth: "+barWidth);
    var gap = 0;
    
    var vis = new pv.Panel()
        .width(width)
        .height(height+5)
        .bottom(200)
        .left(40)
        .right(10)
        .top(5);
        //.add(pv.Bar)
        //    .data(concatdata)
        //    .bottom(10)
        //    .width(barWidth-gap)
        //    .height(function(d) d.y * (height/maxvalue))
        //    .left(function() this.index * barWidth);
    
    vis.add(pv.Rule) //Bottom Ticks
        .data(x.ticks())
        .visible(function(d) d > 0)
        .left(x)
        .strokeStyle("#eee")
    .add(pv.Rule) //Bottom Rule
        .bottom(-10)
        .height(5)
        .visible(function(d) d > 0)
        .strokeStyle("#000")
    .anchor("bottom").add(pv.Label) // Bottom Text
        .text(x.tickFormat)
        .textBaseline(-200);
        //.textAngle(Math.PI / 2);
        
    //console.log("x.tickFormat: "+x.tickFormat);
        
    vis.add(pv.Rule) //Left Hand Rule
        .data(y.ticks())
        .bottom(y)
        .strokeStyle(function (d) d ? "#eee" : "#000")
        .anchor("left").add(pv.Label)
        .text(y.tickFormat);
        
    
    vis.add(pv.Line)
        .data(concatdata)
        .left(function(d) x(d.x))
        .bottom(function(d) y(d.y))
        .lineWidth(3);
        
        
        
    vis.render();
}
</script>
</div>
<div id="jsonData">
</div>
</body>
</html> 
